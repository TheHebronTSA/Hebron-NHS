define("hostLibs",["lodash","prop-types","reactDOM","create-react-class","react","coreUtilsLib"],function(t,e,n,o,r,i){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1399)}({0:function(e,n){e.exports=t},12:function(t,e){t.exports=n},1399:function(t,e,n){var o,r;o=[n(1400)],void 0===(r=function(t){"use strict";return{aspects:{FontsLoaderAspect:t}}}.apply(e,o))||(t.exports=r)},1400:function(t,e,n){var o,r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();o=[n(0),n(18),n(29),n(1401)],void 0===(r=function(t,e,n,o){"use strict";var r=e.createFactory(o),s=new WeakMap,a=function(t,e){t.set(e,!0)},l=function(){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),s.set(this,{storageAPI:t,mediaRootUrl:e,updateFontLoaded:a.bind(null,t),customFonts:[]})}return i(o,[{key:"filterHandledFonts",value:function(e){var n=s.get(this).storageAPI.getAll();return t.reject(e,function(e){return t.has(n,e)})}},{key:"loadFonts",value:function(e,o){var r=s.get(this);r.callback=o;var i=this.filterHandledFonts(e),a=i.filter(function(t){return n.fonts.isUploadedFontFamily(t)});r.customFonts=t(r.customFonts).concat(a).uniq().value(),r.storageAPI.transaction(function(){t.forEach(i,function(t){r.storageAPI.set(t,!1)})})}},{key:"getReactComponents",value:function(){var o=s.get(this),i=o.storageAPI.getAll(),a=t(i).omitBy().keys().value(),l=[t.isEmpty(a)?null:r({fontsList:a,onLoadCallback:o.callback,updateFontLoaded:o.updateFontLoaded,key:"fontRulersContainer"}),t.isEmpty(o.customFonts)?null:function(t,o){var r=n.fonts.getUploadedFontFaceStyles(t,o);return e.createElement("style",{key:"uploadFontsStyleNode",type:"text/css","data-styleid":"uploadedFonts",dangerouslySetInnerHTML:{__html:r||""}})}(o.customFonts,o.mediaRootUrl)];return t.isEmpty(l)?null:t.compact(l)}},{key:"hasPendingFonts",value:function(){var e=s.get(this).storageAPI.getAll();return t(e).values().includes(!1)}}]),o}();return l.aspectName="fontsLoaderAspect",l}.apply(e,o))||(t.exports=r)},1401:function(t,e,n){var o,r;o=[n(18),n(5),n(17),n(0),n(1402)],void 0===(r=function(t,e,n,o,r){"use strict";var i=t.createFactory(r);return n({displayName:"FontRulersContainer",propTypes:{fontsList:e.arrayOf(e.string.isRequired).isRequired,onLoadCallback:e.func.isRequired,updateFontLoaded:e.func.isRequired},fontLoaded:function(t){this._isMounted&&this.props.updateFontLoaded(t),this.props.onLoadCallback()},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},render:function(){var e=this,n=t.createElement("style",{key:"fontRulerContentAfter",dangerouslySetInnerHTML:{__html:'.font-ruler-content::after {content:"@#$%%^&*~IAO"}'}}),r=o.map(this.props.fontsList,function(t){return i({key:t,fontFamily:t,onLoadCallback:e.fontLoaded})});return t.createElement("div",{className:"font-ruler-container",style:{overflow:"hidden",visibility:"hidden",maxHeight:0,maxWidth:0,position:"absolute"}},[n].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(r)))}})}.apply(e,o))||(t.exports=r)},1402:function(t,e,n){var o,r;o=[n(18),n(5),n(17),n(12),n(29),n(0)],void 0===(r=function(t,e,n,o,r,i){"use strict";function s(t){return t&&t.offsetWidth&&t.offsetHeight}function a(t,e){return t.offsetWidth!==e.offsetWidth||t.offsetHeight!==e.offsetHeight}function l(t){return t&&{offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight}}return n({displayName:"FontRuler",propTypes:{fontFamily:e.string.isRequired,onLoadCallback:e.func.isRequired},updateCurrentSize:function(){this.rafID=0;var t=o.findDOMNode(this.refs.wrapper);if(t){var e=o.findDOMNode(this.refs.content),n=o.findDOMNode(this.refs.innerContent),r=o.findDOMNode(this.refs.innerWrapper),i=l(t),u=this.getUploadFontFamilyShortName();t.style.width=i.offsetWidth-1+"px",t.style.height=i.offsetHeight-1+"px",t.scrollLeft=t.scrollWidth-t.clientWidth,t.scrollTop=t.scrollHeight-t.clientHeight,n.style.width=i.offsetWidth+1+"px",n.style.height=i.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth-r.clientWidth,r.scrollTop=r.scrollHeight-r.clientHeight,s(e)&&(this.contentNodeOrigSize?this.trigger=a(e,this.contentNodeOrigSize):this.contentNodeOrigSize=l(e),e.style.fontFamily=u+", serif")}},getUploadFontFamilyShortName:function(){var t=this.props.fontFamily;return r.fonts.isUploadedFontFamily(t)?r.fonts.getShortUploadedFontFamily(t):t},handleScroll:function(t){t.stopPropagation(),t.preventDefault(),this.handleFontResizeDebounced()},componentWillMount:function(){this.handleFontResizeDebounced=i.debounce(function(){if(this._isMounted&&!this.triggeredResize){var t=this.trigger;if(!t&&(t=s(this.contentNodeOrigSize))){var e=o.findDOMNode(this.refs.content);if(!e)return;t=a(e,this.contentNodeOrigSize)}t?(this.rafID&&(r.animationFrame.cancel(this.rafID),this.rafID=0),this.triggeredResize=!0,this.props.onLoadCallback(this.props.fontFamily)):this.rafID||(this.rafID=r.animationFrame.request(this.updateCurrentSize))}}.bind(this),32,{leading:!1,trailing:!0})},componentDidMount:function(){this._isMounted=!0,this.trigger=!1,this.triggeredResize=!1,this.refs.wrapper.addEventListener("scroll",this.handleScroll,!0),this.refs.innerWrapper.addEventListener("scroll",this.handleScroll,!0),this.updateCurrentSize()},componentWillUnmount:function(){this._isMounted=!1,this.rafID&&(r.animationFrame.cancel(this.rafID),this.rafID=0),this.refs.wrapper.removeEventListener("scroll",this.handleScroll),this.refs.innerWrapper.removeEventListener("scroll",this.handleScroll)},render:function(){var e=t.createElement("div",{ref:"innerContent"}),n=t.createElement("div",{ref:"innerWrapper",style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"}},e),o=t.createElement("div",{style:{position:"relative",whiteSpace:"nowrap",fontFamily:"serif"}},n,t.createElement("span",{ref:"content",className:"font-ruler-content"}));return t.createElement("div",{ref:"wrapper",style:{position:"absolute",overflow:"hidden",fontSize:1200,left:-2e3,visibility:"hidden"}},o)}})}.apply(e,o))||(t.exports=r)},17:function(t,e){t.exports=o},18:function(t,e){t.exports=r},29:function(t,e){t.exports=i},5:function(t,n){t.exports=e}})});
//# sourceMappingURL=hostLibs.min.js.map