define("render",["lodash","utils","core","coreUtils","experiment","reactDOM","warmupUtils","compUtils","coreUtilsLib","host-platform-api","animations","santa-renderer","TweenMax","TimelineMax","site-widgets","hostLibs"],function(e,r,n,t,i,s,o,a,d,u,c,l,p,f,w,g){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)n.d(t,i,function(r){return e[r]}.bind(null,i));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=1571)}({0:function(r,n){r.exports=e},1:function(e,n){e.exports=r},105:function(e,r){e.exports=c},109:function(e,r){e.exports=l},12:function(e,r){e.exports=s},13:function(e,r){e.exports=o},15:function(e,r){e.exports=a},1571:function(e,r,n){var t,i;t=[n(0),n(12),n(1),n(13),n(2),n(92),n(15),n(1574),n(109),n(1572),n(1575),n(4),n(8),n(105),n(29),n(299),n(300),n(301)],void 0===(i=function(e,r,n,t,i,s,o,a,d,u,c,l,p,f,w,g,v){"use strict";var m=w.tweenEngine,S=Object.freeze("undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date));function y(e,r){window.clientSideRender||window.isServerSideWithHash?r&&(t.indicator.init(),t.indicator.updateStateOnClientSide(),r()):requirejs(["warmup"],function(r){e(r)})}function h(e){var r=m.create(g,v);return e.fullSiteData.animations=f.create(r),e}function M(e){var r=window.document.getElementById("SITE_CONTAINER");r&&(r.dataset?r.dataset.santaRenderStatus=e:r.setAttribute("data-santa-render-status",e))}function D(e,r,n,t){l.loggingUtils.logger.reportBI(e,u.SERVER_SIDE_RENDERING_DEBUG,{phaseName:"diverge_reporting_failed",statusid:r||0,errorType:n||"noErrorType",error_message:t||"noErrorMessage"})}function R(r,t,i){n.integrations.ravenUtils.initRavenUtils(i),n.integrations.ravenUtils.start(),l.loggingUtils.fedopsLogger.init(i),y(function(e){e.willRender(r)}),window.clientSideRender&&window.santaRenderingError&&window.parent&&window.parent.postMessage({santaRenderingError:window.santaRenderingError.errorInfo},"*"),window.clientSideRender&&i&&(window.removeEventListener("message",i.messageHandler,!1),i.messageBuffer=null);var s=window.document.getElementById("SITE_CONTAINER").children[0];t.onAfterLayout=function(){var t=window.document.getElementById("SITE_CONTAINER").children[0];window.sssr.clientMarkup=t.innerHTML,window.sssr.clientSantaVersion=t.getAttribute("data-santa-version"),y(function(t){var o=c.isWithoutDiverges({rendererModel:{runningExperiments:e.get(i,"rendererModel.runningExperiments")}});if(window.sssr.success=o.success,M(o.success?"SUCCESS":"DIVERGE"),window.sssr.clientSideRender={sinceInitialTimestamp:Date.now()-window.wixBiSession.initialTimestamp,performanceNow:S()},window.parent)if(window.sssr.success)window.parent.postMessage("sssrSuccess","*");else{window.sssr.clientSantaVersion!==window.sssr.serverSantaVersion&&(window.sssr.serverMarkup=window.sssr.serverSantaVersion),window.sssr.serverMarkup=window.sssr.serverMarkup||s.outerHTML;var a=r.wixBiSession.viewerSessionId;window.parent.postMessage({sssrFail:{clientMarkup:window.sssr.clientMarkup,serverMarkup:window.sssr.serverMarkup,vsi:a}},"*"),function(r,t,i,s,o){r.browser.operaMini||n.ajaxLibrary.ajax({type:"POST",url:"https://jy75p2avi1.execute-api.us-west-2.amazonaws.com/prod/logDiffs",dataType:"json",headers:{"x-api-key":"NrelGcqXZH9pIBYc3zjA77SIpiBKUkp643H7P41F"},success:function(n,t,i){(n.errorType||n.errorMessage)&&D(r,e.get(i,"status",0),n.errorType,n.errorMessage)},data:{vsi:o||"missing vsi",santaVersion:s||"missing santa version",url:window.location.href||"missing url",ssrDiverge:{clientMarkup:t||"missing client markup",serverMarkup:i||"missing server markup"}},error:function(n,t,i){D(r,e.get(n,"status",0),t,i)}})}(r,o.clientMarkup,o.serverMarkup,window.sssr.clientSantaVersion,a)}t.didRender(r,window.sssr.success)},function(){M("CLIENT")})},t.aspects=function(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}({},a.aspects.FontsLoaderAspect.aspectName,new a.aspects.FontsLoaderAspect(d.utils.storageAPI.getStorage(),r.serviceTopology.mediaRootUrl))}function x(n,t,i){return function(s){if(window.rendered)window.rendered.forceUpdate();else{var o=r.render(s,window.document.getElementById("SITE_CONTAINER"));window.rendered=o,delete o.props.siteData.ssr.afterWixCode,window.onpopstate=o.onPopState,window.onhashchange=o.onHashChange,n.isViewerMode()?o.registerAspectToEvent(o.supportedEvents.siteReady,function(){i&&i(o)}):requirejs(["santaPreview"],function(e){o.registerAspectToEvent(o.supportedEvents.siteReady,function(){i&&i(o),window.documentServices&&(window.didLoadDocumentServices=!0,window.parent.postMessage("documentServicesLoaded","*"),window.createSantaPreview=e)})}),t.qaAutomation&&(e.set(window,"testApi.domSelectors",t.qaAutomation.getDomSelectors(t.react,t.reactDOM,e.get(t,"react.addons.TestUtils"))),window.testApi.domSelectors.setSearchRoot(window.rendered),window.testApi.isReady=!0)}}}function E(e,r,n,t,s,o){R(r,t,o),i.renderer.renderSite(r,n,t,x(r,e,s))}function b(r,n){e.forOwn(n,function(e){r.createDisplayedPage(e.structure.id)})}function I(r){return e.assign({},r,{eventsManager:w.eventsManager.create()})}return{initSiteForRender:function(e,r,n){var t={};return t.props=I(n),t.privates=i.renderer.createSitePrivatesEx(r,e,t.props),t.prepared=i.renderer.prepareSiteForRender(t.privates.displayedSiteData,t.privates.viewerPrivateServices,t.props),t},renderClientSide:function(r,t,s,o,a){r.componentsPreviewLayer&&r.componentsPreviewLayer.extendCompClasses();var d=function(e,r,n){return h(i.renderer.createSitePrivates(e,r,n))}(t,s,o=I(o)),u=r.documentServices;try{(function(r,t){var i="true"===n.cookieUtils.getCookie("wixRec"),s=r&&e.isUndefined(window.karmaIntegration)&&p.isOpen("sv_fullstory",t);return i||s})(u,s)&&n.integrations.fullStory.start(s)}catch(e){}u?(d.siteDataWrapper.dataLoadedRegistrar=d.siteDataAPI.registerDataLoadedCallback.bind(d.siteDataAPI),window.documentServices=new u.Site(function(e,r){var n=r.query,t=(e[n.configName||"fullFunctionality"]||e.fullFunctionality).getConfig();if(n.disableSave&&(t.disableSave=!0),n.closeSectionGaps&&(t.closeSectionGaps=!0),n.disableMobileConversion&&(t.disableMobileConversion=!0),!n.dsOrigin)throw new Error("You must define dsOrigin parameter in order to use the documentServices - please speak to html-server team for a key");return t.origin=n.dsOrigin,t}(u.configs,d.siteModel.currentUrl),d.siteDataWrapper,e.partial(i.renderer.fixPages,d.siteModel,d.isServerSideRender),e.partial(E,r,d.displayedSiteData,d.viewerPrivateServices,o),e.partial(b,d.siteDataAPI)),e.set(window,"testApi.documentServices",window.documentServices)):(i.renderer.extendPrivates(d),E(r,d.displayedSiteData,d.viewerPrivateServices,o,a,s))},renderFromPrepared:function(r,n,a,d,u){var c=n.siteDataAPI,p=c.siteData;r.componentsSeoLayer&&r.componentsSeoLayer.registerExtensions(void 0,p),p.isFirstRenderAfterSSR()&&p.ssr.afterWixCode&&(a=a.then(function(r){return p.runtimeModels=function(r){var n=r.siteDataAPI.siteData.getAllPossiblyRenderedRoots();n=e.reject(n,function(e){return i.renderer.isProtectedPage(r.siteDataAPI.siteData,e)});var t=r.siteDataAPI.document.getFullAndDisplayedOnlyCompsUnderRoot.bind(r.siteDataAPI.document),a=s.modelBuilderDataHelper.getApi(r.displayedSiteData);return s.modelBuilder.build(r.siteDataAPI.runtime,a,n,e.noop,t,o.compFactory.getCompReactClass,l.loggingUtils.performance)}(n),c.getActionQueue().runImmediately(function(){p.runtime=p.ssr.runtime,c.runtime._runtimeToDisplayed.updateAll(e.get(p,["runtime","components"],{}))}),r})),h(n),function(){var r=e.get(window,"santaRenderingError");if(r&&t.shouldShowDebugInformation()){var n=e.get(r,"errorInfo","");e.invoke(console,"error","%cUnable to render using Server Side Rendering. Defaulting to client-side render.","color: red; font-size: large"),e.invoke(console,"error","Reason: "+n)}}(),R(n.displayedSiteData,d,n.siteModel),i.renderer.doRenderSite(a,d,x(n.fullSiteData,r,u))}}}.apply(r,t))||(e.exports=i)},1572:function(e,r,n){var t,i;t=[n(1573),n(4)],void 0===(i=function(e,r){"use strict";return r.loggingUtils.logger.register("render","event",e),e}.apply(r,t))||(e.exports=i)},1573:function(e){e.exports={SERVER_SIDE_RENDERING_DEBUG:{eventId:4,reportType:"event",endpoint:"bt",src:29,sampleRatio:1,params:{phaseName:"phaseName",errorType:"errorType",error_message:"error_message",statusid:"statusid"}}}},1574:function(e,r){e.exports=g},1575:function(e,r,n){var t,i;t=[n(0),n(8)],void 0===(i=function(e,r){"use strict";var n=function(){return function(e,r){for(var n=[],t=[],i=[e],s=[r],a=void 0,d=void 0;i.length>0;)if(a=i.shift(),d=s.shift(),!o(a)&&!o(d)){n.push(a),t.push(d);for(var u=0;u<a.children.length;u++)!1===o(a.children[u])&&!1===o(d.children[u])&&(i.push(a.children[u]),s.push(d.children[u]))}return{serverNodes:n,clientNodes:t}}(window.document.createRange().createContextualFragment(window.sssr.serverMarkup),window.document.createRange().createContextualFragment(window.sssr.clientMarkup))},t=["siteBackground","theme_fonts","theme_colors","languages","googleFonts"],i=["data-state"],s=[function(r){return e.invoke(r,"innerHTML.includes",".testStyles")},function(r){return e.invoke(r,"classList.contains","font-ruler-content")||e.invoke(r,"classList.contains","font-ruler-container")},function(r){return"WIX_ADS"===r.id||"partiallyVisibleBeat"===r.id||e.includes(r.id,"BACK_TO_TOP_BUTTON")||e.includes(r.id,"TINY_MENU")||e.includes(r.id,"QUICK_ACTION")},function(r){if(r.dataset){if(e.includes(t,r.dataset.styleid))return!0;if(e.includes(i,r.dataset))return!0}},function(r){var n=e.get(e.invoke(r,"querySelector","div div script"),"src");return 0===e.get(r,"attributes.length")&&e.find(["plusone.js","connect.facebook.net/"],function(r){return e.includes(n,r)})},function(r){return e.chain(r).get("className","").startsWith("ecommerce_").value()},function(r){return e.chain(r).get("children[0].classList").invoke("contains","font-ruler-container").value()}],o=function(r){return void 0!==e.find(s,function(e){return r&&e(r)})},a=function(e,r){if(!e||!r)return!0;if(e.tagName!==r.tagName)return!0;if(0===e.children.length){if(r.innerHTML!==e.innerHTML)return!0}else if(e.children.length!==r.children.length)return!0;return!1},d={success:!0,clientMarkup:"",serverMarkup:""};return{isWithoutDiverges:function(e){if(!r.isOpen("sv_ssrDetectDiverges",e))return d;for(var t=n(),i=t.serverNodes,s=t.clientNodes,o=0;o<i.length;o++){var u=s[o],c=i[o];if(a(c,u))return{success:!1,clientMarkup:u.outerHTML,serverMarkup:c.outerHTML}}return d}}}.apply(r,t))||(e.exports=i)},2:function(e,r){e.exports=n},29:function(e,r){e.exports=d},299:function(e,r){e.exports=p},300:function(e,r){e.exports=f},301:function(e,r){e.exports=w},4:function(e,r){e.exports=t},8:function(e,r){e.exports=i},92:function(e,r){e.exports=u}})});
//# sourceMappingURL=render.min.js.map